Not much takling - just the code.

    class FootballClub < Struct.new(:name, :location)
      def to_s
        name
      end
    end
    class FootballFan < Struct.new(:name, :location, :club)
      def to_s
        name
      end
    end

    module LocationMethods 
      def to_s
        "#{yield(:next)} (#{location})"
      end
    end
    module ClubMethods
      def to_s
        "#{yield(:next)}; #{club}"
      end
    end

    class FootballFan
      include ClubMethods => :club
      include LocationMethods => :location
    end
    class FootballClub
      include LocationMethods => :location
    end

    $bayern = FootballClub.new("FC Bayern", "Munich")
    $franz = FootballFan.new("Franz", "Austria", $bayern)

    example do
      output_of($bayern) == "FC Bayern"
      output_of($franz) == "Franz"
    end

    example do
      ContextR.with_layer :location do 
        output_of($bayern) == "FC Bayern (Munich)"
        output_of($franz) == "Franz (Austria)"
      end
    end

    example do
      ContextR.with_layer :club do 
        output_of($franz) == "Franz; FC Bayern"
      end
    end

    example do
      ContextR.with_layer :club, :location do 
        output_of($franz) == "Franz (Austria); FC Bayern (Munich)"
      end
    end
